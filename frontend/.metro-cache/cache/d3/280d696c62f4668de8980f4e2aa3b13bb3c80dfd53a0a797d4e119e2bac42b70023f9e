{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../trackPlayer","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":45,"index":90}}],"key":"gv0d7JcxMdf3FxyZp+tv0d0XSJ0=","exportNames":["*"],"imports":1}},{"name":"../constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":91},"end":{"line":3,"column":37,"index":128}}],"key":"eTOOXVNPpMK2U8dOAmBWjbEJ4yE=","exportNames":["*"],"imports":1}},{"name":"./useTrackPlayerEvents","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":129},"end":{"line":4,"column":62,"index":191}}],"key":"fnU5Qjl2KmnIM/3qfH8OcXLTCuk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useProgress = useProgress;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _trackPlayer = require(_dependencyMap[1], \"../trackPlayer\");\n  var _constants = require(_dependencyMap[2], \"../constants\");\n  var _useTrackPlayerEvents = require(_dependencyMap[3], \"./useTrackPlayerEvents\");\n  const INITIAL_STATE = {\n    position: 0,\n    duration: 0,\n    buffered: 0\n  };\n  /**\n   * Poll for track progress for the given interval (in miliseconds)\n   * @param updateInterval - ms interval\n   */\n  function useProgress(updateInterval = 1000) {\n    const [state, setState] = (0, _react.useState)(INITIAL_STATE);\n    (0, _useTrackPlayerEvents.useTrackPlayerEvents)([_constants.Event.PlaybackActiveTrackChanged], () => {\n      setState(INITIAL_STATE);\n    });\n    (0, _react.useEffect)(() => {\n      let mounted = true;\n      const update = async () => {\n        try {\n          const {\n            position,\n            duration,\n            buffered\n          } = await (0, _trackPlayer.getProgress)();\n          if (!mounted) return;\n          setState(state => position === state.position && duration === state.duration && buffered === state.buffered ? state : {\n            position,\n            duration,\n            buffered\n          });\n        } catch {\n          // these method only throw while you haven't yet setup, ignore failure.\n        }\n      };\n      const poll = async () => {\n        await update();\n        if (!mounted) return;\n        await new Promise(resolve => setTimeout(resolve, updateInterval));\n        if (!mounted) return;\n        poll();\n      };\n      poll();\n      return () => {\n        mounted = false;\n      };\n    }, [updateInterval]);\n    return state;\n  }\n});","lineCount":59,"map":[[7,2,14,0,"exports"],[7,9,14,0],[7,10,14,0,"useProgress"],[7,21,14,0],[7,24,14,0,"useProgress"],[7,35,14,0],[8,2,1,0],[8,6,1,0,"_react"],[8,12,1,0],[8,15,1,0,"require"],[8,22,1,0],[8,23,1,0,"_dependencyMap"],[8,37,1,0],[9,2,2,0],[9,6,2,0,"_trackPlayer"],[9,18,2,0],[9,21,2,0,"require"],[9,28,2,0],[9,29,2,0,"_dependencyMap"],[9,43,2,0],[10,2,3,0],[10,6,3,0,"_constants"],[10,16,3,0],[10,19,3,0,"require"],[10,26,3,0],[10,27,3,0,"_dependencyMap"],[10,41,3,0],[11,2,4,0],[11,6,4,0,"_useTrackPlayerEvents"],[11,27,4,0],[11,30,4,0,"require"],[11,37,4,0],[11,38,4,0,"_dependencyMap"],[11,52,4,0],[12,2,5,0],[12,8,5,6,"INITIAL_STATE"],[12,21,5,19],[12,24,5,22],[13,4,6,4,"position"],[13,12,6,12],[13,14,6,14],[13,15,6,15],[14,4,7,4,"duration"],[14,12,7,12],[14,14,7,14],[14,15,7,15],[15,4,8,4,"buffered"],[15,12,8,12],[15,14,8,14],[16,2,9,0],[16,3,9,1],[17,2,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,2,14,7],[21,11,14,16,"useProgress"],[21,22,14,27,"useProgress"],[21,23,14,28,"updateInterval"],[21,37,14,42],[21,40,14,45],[21,44,14,49],[21,46,14,51],[22,4,15,4],[22,10,15,10],[22,11,15,11,"state"],[22,16,15,16],[22,18,15,18,"setState"],[22,26,15,26],[22,27,15,27],[22,30,15,30],[22,34,15,30,"useState"],[22,40,15,38],[22,41,15,38,"useState"],[22,49,15,38],[22,51,15,39,"INITIAL_STATE"],[22,64,15,52],[22,65,15,53],[23,4,16,4],[23,8,16,4,"useTrackPlayerEvents"],[23,29,16,24],[23,30,16,24,"useTrackPlayerEvents"],[23,50,16,24],[23,52,16,25],[23,53,16,26,"Event"],[23,63,16,31],[23,64,16,31,"Event"],[23,69,16,31],[23,70,16,32,"PlaybackActiveTrackChanged"],[23,96,16,58],[23,97,16,59],[23,99,16,61],[23,105,16,67],[24,6,17,8,"setState"],[24,14,17,16],[24,15,17,17,"INITIAL_STATE"],[24,28,17,30],[24,29,17,31],[25,4,18,4],[25,5,18,5],[25,6,18,6],[26,4,19,4],[26,8,19,4,"useEffect"],[26,14,19,13],[26,15,19,13,"useEffect"],[26,24,19,13],[26,26,19,14],[26,32,19,20],[27,6,20,8],[27,10,20,12,"mounted"],[27,17,20,19],[27,20,20,22],[27,24,20,26],[28,6,21,8],[28,12,21,14,"update"],[28,18,21,20],[28,21,21,23],[28,27,21,23,"update"],[28,28,21,23],[28,33,21,35],[29,8,22,12],[29,12,22,16],[30,10,23,16],[30,16,23,22],[31,12,23,24,"position"],[31,20,23,32],[32,12,23,34,"duration"],[32,20,23,42],[33,12,23,44,"buffered"],[34,10,23,53],[34,11,23,54],[34,14,23,57],[34,20,23,63],[34,24,23,63,"getProgress"],[34,36,23,74],[34,37,23,74,"getProgress"],[34,48,23,74],[34,50,23,75],[34,51,23,76],[35,10,24,16],[35,14,24,20],[35,15,24,21,"mounted"],[35,22,24,28],[35,24,25,20],[36,10,26,16,"setState"],[36,18,26,24],[36,19,26,26,"state"],[36,24,26,31],[36,28,26,36,"position"],[36,36,26,44],[36,41,26,49,"state"],[36,46,26,54],[36,47,26,55,"position"],[36,55,26,63],[36,59,27,20,"duration"],[36,67,27,28],[36,72,27,33,"state"],[36,77,27,38],[36,78,27,39,"duration"],[36,86,27,47],[36,90,28,20,"buffered"],[36,98,28,28],[36,103,28,33,"state"],[36,108,28,38],[36,109,28,39,"buffered"],[36,117,28,47],[36,120,29,22,"state"],[36,125,29,27],[36,128,30,22],[37,12,30,24,"position"],[37,20,30,32],[38,12,30,34,"duration"],[38,20,30,42],[39,12,30,44,"buffered"],[40,10,30,53],[40,11,30,54],[40,12,30,55],[41,8,31,12],[41,9,31,13],[41,10,32,12],[41,16,32,18],[42,10,33,16],[43,8,33,16],[44,6,35,8],[44,7,35,9],[45,6,36,8],[45,12,36,14,"poll"],[45,16,36,18],[45,19,36,21],[45,25,36,21,"poll"],[45,26,36,21],[45,31,36,33],[46,8,37,12],[46,14,37,18,"update"],[46,20,37,24],[46,21,37,25],[46,22,37,26],[47,8,38,12],[47,12,38,16],[47,13,38,17,"mounted"],[47,20,38,24],[47,22,39,16],[48,8,40,12],[48,14,40,18],[48,18,40,22,"Promise"],[48,25,40,29],[48,26,40,31,"resolve"],[48,33,40,38],[48,37,40,43,"setTimeout"],[48,47,40,53],[48,48,40,54,"resolve"],[48,55,40,61],[48,57,40,63,"updateInterval"],[48,71,40,77],[48,72,40,78],[48,73,40,79],[49,8,41,12],[49,12,41,16],[49,13,41,17,"mounted"],[49,20,41,24],[49,22,42,16],[50,8,43,12,"poll"],[50,12,43,16],[50,13,43,17],[50,14,43,18],[51,6,44,8],[51,7,44,9],[52,6,45,8,"poll"],[52,10,45,12],[52,11,45,13],[52,12,45,14],[53,6,46,8],[53,13,46,15],[53,19,46,21],[54,8,47,12,"mounted"],[54,15,47,19],[54,18,47,22],[54,23,47,27],[55,6,48,8],[55,7,48,9],[56,4,49,4],[56,5,49,5],[56,7,49,7],[56,8,49,8,"updateInterval"],[56,22,49,22],[56,23,49,23],[56,24,49,24],[57,4,50,4],[57,11,50,11,"state"],[57,16,50,16],[58,2,51,0],[59,0,51,1],[59,3]],"functionMap":{"names":["<global>","useProgress","useTrackPlayerEvents$argument_1","useEffect$argument_0","update","setState$argument_0","poll","Promise$argument_0","<anonymous>"],"mappings":"AAA;OCa;6DCE;KDE;cEC;uBCE;yBCK;sDDI;SDK;qBGC;8BCI,gDD;SHI;eKE;SLE;KFC;CDE"},"hasCjsExports":false},"type":"js/module"}]}